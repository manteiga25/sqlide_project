<?xml version="1.0" encoding="UTF-8"?>

<?import atlantafx.base.controls.*?>
<?import com.jfoenix.controls.*?>
<?import java.lang.*?>
<?import java.net.*?>
<?import javafx.collections.*?>
<?import javafx.embed.swing.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.chart.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import org.controlsfx.control.*?>

<BorderPane fx:id="MainContainer" style="-fx-background-color: #0f1720;" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.sqlide.DataScience.DataScienceController">

    <!-- TOP: Title bar / toolbar -->
    <top>
        <!-- Cabeçalho unificado com título, busca e status -->
        <VBox spacing="8" style="-fx-padding: 12;">
            <HBox alignment="CENTER_LEFT" spacing="12">
                <Label style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;" text="Data Science Center" />
                <Region HBox.hgrow="ALWAYS" />
                <Button fx:id="btnUndo" style="-fx-background-color: #4B5563;" text="Desfazer" />
            </HBox>

            <HBox alignment="CENTER_LEFT" spacing="10">
                <TextField fx:id="searchField" prefWidth="300" promptText="Pesquisar colunas..." style="-fx-background-radius: 4;" />
                <ProgressBar fx:id="globalProgress" prefWidth="150" visible="false" />
                <Label fx:id="lblStatus" style="-fx-text-fill: #9CA3AF;" text="Pronto" />
            </HBox>
        </VBox>
    </top>

    <!-- LEFT: Dataset / Columns / Metadata -->
    <left>
        <VBox spacing="8" style="-fx-padding: 12; -fx-background-color: linear-gradient(#071024, #0d1320);">
         <HBox alignment="CENTER_LEFT">
            <children>
      
                  <Label style="-fx-text-fill: #E6EEF5; -fx-font-size: 13; -fx-font-weight: 600;" text="Colunas" />
                <Spacer />
               <Button mnemonicParsing="false" onAction="#load_table_metadata" text="Reload" />
            </children>
         </HBox>

            <TableView fx:id="tblColumns" style="-fx-background-radius: 8; -fx-border-radius: 8;">
                <columns>
                    <TableColumn fx:id="colName" prefWidth="-1.0" text="Nome" />
                    <TableColumn fx:id="colType" prefWidth="-1.0" text="Tipo" />
                    <TableColumn fx:id="colNulls" prefWidth="-1.0" text="Nulls" />
                </columns>
            <columnResizePolicy>
               <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
            </columnResizePolicy>
            </TableView>

            <Separator />

            <VBox spacing="6">
                <Label style="-fx-text-fill: #9CA3AF; -fx-font-size: 12;" text="Metadados  Estatísticas" />
                <TextArea fx:id="taMetadata" editable="false" prefRowCount="6" wrapText="true" />
            </VBox>
         <padding>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
         </padding>
        </VBox>
    </left>

    <!-- CENTER: Main Tabbed workspace -->
    <center>
        <TabPane fx:id="mainTabs" stylesheets="@../../../../css/SpinnerStyle.css" tabClosingPolicy="UNAVAILABLE">

            <!-- Imputation -->
            <Tab text="Imputação">
                <SplitPane dividerPositions="0.5" orientation="HORIZONTAL" style="-fx-background-color: transparent;" stylesheets="@../../../../css/SplitHorizontal.css">
                    <items>
                        <!-- Left: controls -->
                        <VBox fx:id="ImputBox" spacing="10">
                            <Label style="-fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: 700;" text="Imputação de Valores Nulos" />

                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <Label style="-fx-text-fill:#9CA3AF;" text="Target (Y):" />
                                <ChoiceBox fx:id="cbImputeColumn" />
                        <Button mnemonicParsing="false" onAction="#AddColumn" text="Add" />
                            </HBox>

                            <HBox alignment="CENTER_LEFT" spacing="8">
                                <Label style="-fx-text-fill:#9CA3AF;" text="Método:" />
                                <ComboBox fx:id="comboImputeMethod" prefWidth="240">
                                    <items>
                                        <FXCollections fx:factory="observableArrayList">
                                            <String fx:value="Linear Regression (prever com outras colunas)" />
                                            <String fx:value="Média" />
                                            <String fx:value="Mediana" />
                                            <String fx:value="KNN (k-Nearest)" />
                                            <String fx:value="Interpolação" />
                                        </FXCollections>
                                    </items>
                                </ComboBox>
                        <Label text="Or use model on modeling stage" />
                            </HBox>

                            <TitledPane expanded="false" text="Parâmetros (avançado)">
                                <VBox spacing="8">
                                    <HBox spacing="6"><Label text="k (KNN):" /><Spinner fx:id="spinK" editable="true" /></HBox>
                                    <HBox spacing="6"><Label text="Max Iterações (Regressão):" /><Spinner fx:id="spinIter" editable="true" /></HBox>
                                    <HBox spacing="6"><Label text="Normalizar:" /><CheckBox fx:id="chkNormalize" selected="true" /></HBox>
                                </VBox>
                            </TitledPane>

                            <HBox spacing="8">
                                <Button fx:id="btnRunImpute" text="Executar Imputação" />
                                <Button fx:id="btnPreviewImpute" text="Pré-visualizar" />
                                <Button fx:id="btnRevertImpute" text="Reverter" />
                            </HBox>

                            <ProgressIndicator fx:id="piImpute" visible="false" />

                            <Separator style="-fx-base: black;" />

                            <Label style="-fx-text-fill:#9CA3AF;" text="Logs" />
                            <TextArea fx:id="taImputeLog" editable="false" prefRowCount="8" style="-fx-base: transparent;" wrapText="true" VBox.vgrow="ALWAYS" />
                     <padding>
                        <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                     </padding>
                        </VBox>

                        <!-- Right: visualization / model diagnostics -->
                        <VBox maxHeight="1.7976931348623157E308" spacing="8">
                            <Label style="-fx-text-fill: white; -fx-font-size: 13; -fx-font-weight: 700;" text="Diagnóstico de Regressão" />

                            <TabPane stylesheets="@../../../../css/ChartStyle.css" VBox.vgrow="ALWAYS">
                                <tabs>
                                    <Tab text="Resumo">
                                        <VBox spacing="6">
                                            <Label style="-fx-text-fill: #9CA3AF;" text="Resumo do Modelo" />
                                            <TextArea fx:id="taModelSummary" editable="false" prefRowCount="8" style="-fx-base: transparent;" wrapText="true" VBox.vgrow="ALWAYS" />
                                        </VBox>
                                    </Tab>
                                    <Tab text="Resíduos">
                                        <VBox spacing="6">
                                            <!-- Chart placeholder; controller will put a ScatterChart here -->
                                            <StackPane fx:id="chartResiduals" style="-fx-border-color: #203040; -fx-border-radius:8; -fx-background-radius:8;" VBox.vgrow="ALWAYS" />
                                            <Label style="-fx-text-fill:#9CA3AF;" text="Gráfico de resíduos" />
                                 <padding>
                                    <Insets top="10.0" />
                                 </padding>
                                        </VBox>
                                    </Tab>
                                    <Tab text="Comparação">
                                        <VBox spacing="6">
                                            <StackPane fx:id="chartImputeCompare" style="-fx-border-color: #203040; -fx-border-radius:8; -fx-background-radius:8;" VBox.vgrow="ALWAYS">
                                    <VBox.margin>
                                       <Insets top="10.0" />
                                    </VBox.margin></StackPane>
                                            <Label style="-fx-text-fill:#9CA3AF;" text="Valores originais x imputados" />
                                        </VBox>
                                    </Tab>
                                </tabs>
                        <padding>
                           <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
                        </padding>
                            </TabPane>

                        </VBox>
                    </items>
                </SplitPane>
            </Tab>

            <!-- Outliers -->
            <Tab text="Outliers">
                <BorderPane>
                    <left>
                        <VBox spacing="8">
                            <Label style="-fx-text-fill:white; -fx-font-weight:700;" text="Detecção de Outliers" />
                            <HBox spacing="8"><Label style="-fx-text-fill:#9CA3AF;" text="Coluna:" /><ChoiceBox fx:id="cbOutlierColumn" prefWidth="200" /></HBox>
                            <HBox spacing="8"><Label style="-fx-text-fill:#9CA3AF;" text="Método:" /><ComboBox fx:id="comboOutlierMethod" value="IQR"><items><FXCollections fx:factory="observableArrayList"><String fx:value="IQR" /><String fx:value="Z-score" /><String fx:value="Mean" /><String fx:value="Isolation Forest" /></FXCollections></items></ComboBox></HBox>
                            <HBox spacing="8"><Label style="-fx-text-fill:#9CA3AF;" text="Threshold:" /><TextField fx:id="tfOutlierThresh" prefWidth="120" promptText="ex: 3.0" /></HBox>
                            <HBox spacing="8"><Button fx:id="btnDetectOutliers" onAction="#handleDetectOutliers" text="Detectar" /><Button fx:id="btnRemoveOutliers" onAction="#handleRemoveOutliers" text="Remover" />
                        <Button fx:id="btnUpdateOutliers" layoutX="91.0" layoutY="10.0" text="Atualizar" /></HBox>

                            <Separator />
                            <Label style="-fx-text-fill:#9CA3AF;" text="Visão rápida" />
                            <TableView fx:id="tblOutliersPreview" VBox.vgrow="ALWAYS">
                        <columnResizePolicy>
                           <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy></TableView>
                     <BorderPane.margin>
                        <Insets bottom="10.0" right="10.0" top="10.0" />
                     </BorderPane.margin>
                        </VBox>
                    </left>
                    <center>
                        <VBox spacing="8">
                            <Label style="-fx-text-fill:#E6EEF5; -fx-font-weight:600;" text="Distribuição" />
                            <StackPane style="-fx-border-color: #203040; -fx-border-radius:8; -fx-background-radius:8;" stylesheets="@../../../../css/ChartStyle.css" VBox.vgrow="ALWAYS">
                        <children>
                           <SwingNode fx:id="chart" />
                        </children></StackPane>
                     <BorderPane.margin>
                        <Insets />
                     </BorderPane.margin>
                        </VBox>
                    </center>
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
                </BorderPane>
            </Tab>

            <!-- Metrics -->
            <Tab text="Métricas">
                <VBox spacing="8">
                    <Label style="-fx-text-fill:white; -fx-font-weight:700;" text="Métricas e Estatísticas Descritivas" />
                    <GridPane hgap="12" vgap="8" VBox.vgrow="ALWAYS">
                        <columnConstraints>
                            <ColumnConstraints percentWidth="33" />
                     <ColumnConstraints minWidth="10.0" percentWidth="34.0" prefWidth="100.0" />
                            <ColumnConstraints percentWidth="34" />
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints />
                        </rowConstraints>

                        <children>
                            <VBox spacing="5.0" GridPane.columnIndex="0" GridPane.hgrow="ALWAYS" GridPane.vgrow="ALWAYS">
                                <Label style="-fx-text-fill:#9CA3AF;" text="Resumo numérico" />
                        <TableView fx:id="tableStat" maxWidth="1.7976931348623157E308" VBox.vgrow="ALWAYS">
                          <columns>
                            <TableColumn fx:id="columnName" prefWidth="-1.0" text="Column" />
                              <TableColumn fx:id="columnMean" prefWidth="-1.0" text="mean" />
                              <TableColumn fx:id="columnMedian" prefWidth="-1.0" text="median" />
                              <TableColumn fx:id="columnSTD" prefWidth="-1.0" text="std" />
                              <TableColumn fx:id="columnMin" prefWidth="-1.0" text="min" />
                              <TableColumn fx:id="columnMax" prefWidth="-1.0" text="max" />
                              <TableColumn fx:id="columnVariance" prefWidth="-1.0" text="variância amostral" />
                              <TableColumn fx:id="columnSquareVariance" prefWidth="-1.0" text="desvio padrão amostral" />
                          </columns>
                           <columnResizePolicy>
                              <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                           </columnResizePolicy>
                        </TableView>
                            </VBox>

                            <VBox GridPane.columnIndex="1" GridPane.vgrow="ALWAYS">
                                <Label style="-fx-text-fill:#9CA3AF;" text="Correlação" />
                                <StackPane fx:id="chartCorrelation" />
                                <Button fx:id="btnExportCorr" text="Exportar Matriz" />
                            </VBox>

                            <VBox GridPane.columnIndex="2" GridPane.vgrow="ALWAYS">
                                <Label style="-fx-text-fill:#9CA3AF;" text="Dispersão / Relações" />
                                <StackPane fx:id="chartScatterMatrix" />
                                <Button fx:id="btnPairPlot" text="Gerar Pairplot" />
                            </VBox>
                        </children>
                    </GridPane>
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
                </VBox>
            </Tab>

            <Tab text="Distribuição">
                <SplitPane dividerPositions="0.5" maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" style="-fx-background-color: transparent;" stylesheets="@../../../../css/SplitHorizontal.css">
                    <VBox maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" spacing="5.0">
                  <HBox alignment="CENTER_LEFT" spacing="5.0">
                     <children>
                              <Label text="Target:" />
                              <ChoiceBox fx:id="boxTarget" />
                              <Button onAction="#calculateDistribution" text="calculate" />
                     </children>
                  </HBox>
                  <TextArea fx:id="textDistribution" editable="false" style="-fx-base: transparent;" wrapText="true" VBox.vgrow="ALWAYS">
                     <VBox.margin>
                        <Insets right="5.0" />
                     </VBox.margin></TextArea>
                    </VBox>
                    <VBox maxHeight="1.7976931348623157E308" maxWidth="1.7976931348623157E308" spacing="5.0">
                  <HBox alignment="CENTER_LEFT" spacing="5.0">
                     <children>
                        <Label text="Histogram type:" />
                         <ChoiceBox fx:id="boxFrequency" value="Frequency"><items><FXCollections fx:factory="observableArrayList"><String fx:value="Frequency" /><String fx:value="Intervale" /></FXCollections></items></ChoiceBox>
                        <Label text="Bins:" />
                        <Spinner fx:id="binSpinner" style="-fx-background-color: transparent; -fx-background-radius: 0px;" />
                         <Spacer />
                        <Button mnemonicParsing="false" onAction="#cleanGraph" style="-fx-background-color: red;" text="Clear" />
                     </children>
                  </HBox>
                    <ScrollPane fx:id="graphstack" fitToHeight="true" style="-fx-background-color: transparent;" stylesheets="@../../../../css/ScrollHbarStyle.css" SplitPane.resizableWithParent="false" VBox.vgrow="ALWAYS">
                  <BarChart fx:id="chartDistribution" barGap="2.0" categoryGap="2.0" maxWidth="1.7976931348623157E308" stylesheets="@../../../../css/ChartStyle.css" VBox.vgrow="ALWAYS">
                    <xAxis>
                      <CategoryAxis side="BOTTOM" />
                    </xAxis>
                    <yAxis>
                      <NumberAxis side="LEFT" />
                    </yAxis>
                  </BarChart>
                    </ScrollPane>
                  <padding>
                     <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                  </padding>
                    </VBox>
               <padding>
                  <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
               </padding>
                </SplitPane>
            </Tab>

            <!-- Modeling -->
            <Tab text="Modelagem">
                <SplitPane dividerPositions="0.5" style="-fx-background-color: transparent;" stylesheets="@../../../../css/SplitHorizontal.css">
                    <items>
                        <VBox fx:id="boxModel" spacing="10.0">
                            <Label style="-fx-text-fill:white; -fx-font-weight:700;" text="Treinar modelo preditivo" />
                            <HBox alignment="CENTER_LEFT" spacing="8"><Label style="-fx-text-fill:#9CA3AF;" text="Alvo:" /><ChoiceBox fx:id="cbTargetColumn" />
                        <Button mnemonicParsing="false" onAction="#AddColumnTrain" text="Add" /></HBox>
                          <!--  <HBox spacing="8"><Label style="-fx-text-fill:#9CA3AF;" text="Algoritmo:" /><ComboBox fx:id="comboModelAlgo" value="Linear Regression"><items><FXCollections fx:factory="observableArrayList"><String fx:value="Linear Regression" /><String fx:value="Random Forest" /><String fx:value="XGBoost" /><String fx:value="Logistic Regression" /><String fx:value="Logistic Regression Binomial" /><String fx:value="Logistic Regression Multinomial" /><String fx:value="Random Forest Classification" /></FXCollections></items></ComboBox> -->
                            <HBox alignment="CENTER_LEFT" spacing="8"><Label style="-fx-text-fill:#9CA3AF;" text="Algoritmo:" />
                                <ComboBox fx:id="comboModelAlgo" />
                        <Label text="Evaluate split:" />
                        <Spinner fx:id="testSpinner" editable="true" /></HBox>
                     <HBox alignment="CENTER_LEFT" layoutX="10.0" layoutY="68.0" spacing="8">
                        <children>
                           <Label style="-fx-text-fill:#9CA3AF;" text="Learning rate:" />
                            <Spinner fx:id="learningRateSpinner" editable="true" />
                        </children>
                     </HBox>
                     <HBox alignment="CENTER_LEFT" layoutX="10.0" layoutY="101.0" spacing="8">
                        <children>
                           <Label style="-fx-text-fill:#9CA3AF;" text="batch size (Rows):" />
                           <Spinner fx:id="batchSpinner" editable="true" />
                        </children>
                     </HBox>
                     <HBox alignment="CENTER_LEFT" layoutX="10.0" layoutY="146.0" spacing="8">
                        <children>
                           <Label style="-fx-text-fill:#9CA3AF;" text="Limit data:" />
                           <Spinner fx:id="limitSpinner" editable="true" />
                           <Label layoutX="10.0" layoutY="16.0" style="-fx-text-fill:#9CA3AF;" text="initial offset:" />
                           <Spinner fx:id="offsetSpinner" editable="true" layoutX="74.0" layoutY="10.0" />
                        </children>
                     </HBox>
                            <HBox alignment="CENTER_LEFT" spacing="8"><Label style="-fx-text-fill:#9CA3AF;" text="Data validation condition:" />
                        <JFXTextField fx:id="textQueryTest" promptText="Ex: x &gt; 5 or ...." style="-fx-background-color: transparent; -fx-border-color: transparent;" HBox.hgrow="ALWAYS" /></HBox>
                            <HBox fx:id="boxStart" spacing="8"><Button fx:id="btnTrain" text="Treinar" /><Button fx:id="btnEvaluate" onAction="#evaluateModel" text="Avaliar" /><Button fx:id="btnExportModel" onAction="#exportModel" text="Exportar Modelo" /></HBox>
   
                           <VBox spacing="8" VBox.vgrow="ALWAYS">
                               <Label style="-fx-text-fill:white; -fx-font-weight:700;" text="Resultados" />
                               <TextArea fx:id="taModelResults" editable="false" prefRowCount="8" style="-fx-base: transparent;" wrapText="true" VBox.vgrow="ALWAYS" />
                           </VBox>
                     <padding>
                        <Insets right="5.0" />
                     </padding>
                        </VBox>
                  <TabPane tabClosingPolicy="UNAVAILABLE">
                    <tabs>
                      <Tab text="Train Graph">
                           <content>
                              <VBox>
                                 <children>
                                    <ToolBar style="-fx-background-color: transparent;">
                                      <items>
                                          <Label text="Serie:" />
                                        <CheckComboBox fx:id="comboSerie" title="" />
                                      </items>
                                    </ToolBar>
                                    <LineChart fx:id="TrainGraph" stylesheets="@../../../../css/ChartStyle.css" title="State of train" verticalGridLinesVisible="false" VBox.vgrow="ALWAYS">
                                      <xAxis>
                                        <NumberAxis label="State of model" side="BOTTOM" />
                                      </xAxis>
                                      <yAxis>
                                        <NumberAxis label="Steps" side="LEFT">
                                             <padding>
                                                <Insets left="5.0" />
                                             </padding></NumberAxis>
                                      </yAxis>
                                    </LineChart>
                                 </children>
                                 <padding>
                                    <Insets left="5.0" />
                                 </padding>
                              </VBox>
                           </content></Tab>
                        <Tab text="Evaluate Graph">
                            <StackPane>
                                <ScatterChart fx:id="graphModelEvaluation" stylesheets="@../../../../css/ChartStyle.css" title="Model evaluation" verticalGridLinesVisible="false" VBox.vgrow="ALWAYS">
                                    <xAxis>
                                        <CategoryAxis label="Predicted" side="BOTTOM" />
                                    </xAxis>
                                    <yAxis>
                                        <CategoryAxis label="Real y" side="LEFT" />
                                    </yAxis>
                                </ScatterChart>
                            </StackPane>
                        </Tab>
                        <Tab text="Residual">
                            <VBox>
                              <children>
                                 <ToolBar fx:id="PageGraph" style="-fx-background-color: transparent;">
                                   <items>
                                       <Hyperlink onAction="#forwardResidualPage" style="-fx-border-color: #3C3C3C; -fx-border-radius: 3px; -fx-background-color: #1A1A1A;" stylesheets="@../../../../css/Hyper.css" text="&lt;&lt;" />
                                       <Hyperlink onAction="#nextResidualPage" style="-fx-border-color: #3C3C3C; -fx-border-radius: 3px; -fx-background-color: 3p #1A1A1Ax;" stylesheets="@../../../../css/Hyper.css" text="&gt;&gt;" />
                                   </items>
                                 </ToolBar>
                                 <ScatterChart fx:id="graphModelResidual" stylesheets="@../../../../css/ChartStyle.css" title="Model residual" verticalGridLinesVisible="false" VBox.vgrow="ALWAYS">
                                   <xAxis>
                                     <NumberAxis label="Residual" side="BOTTOM" />
                                   </xAxis>
                                   <yAxis>
                                     <NumberAxis label="Real y" side="LEFT" />
                                   </yAxis>
                                 </ScatterChart>
                              </children>
                              <padding>
                                 <Insets left="5.0" />
                              </padding></VBox>
                        </Tab>
                      <Tab text="test">
                              <VBox spacing="5.0">
                                 <children>
                                    <FlowPane fx:id="TestBox" VBox.vgrow="ALWAYS">
                                    <VBox.margin>
                                       <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                                    </VBox.margin></FlowPane>
                                 <Button mnemonicParsing="false" onAction="#PredictValue" text="Preidict" />
                                 <TextArea fx:id="textPredictHistory" editable="false" style="-fx-base: transparent;" wrapText="true" />
                                 </children>
                              <padding>
                                 <Insets bottom="5.0" left="5.0" right="5.0" top="5.0" />
                              </padding>
                              </VBox>
                      </Tab>
                    </tabs>
                  </TabPane>
                    </items>
               <padding>
                  <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
               </padding>
                </SplitPane>
            </Tab>
         <padding>
            <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
         </padding>

        </TabPane>
    </center>

    <!-- RIGHT: Action quick panel / history -->
    <right>
        <VBox spacing="12" style="-fx-padding: 12; -fx-background-color: #081623;">
            <Label style="-fx-text-fill: #E6EEF5; -fx-font-weight: bold;" text="Ações Rápidas" />

            <VBox spacing="8">
                <Button fx:id="btnAutoImpute" style="-fx-background-color: #3B82F6; -fx-text-fill: white;" text="Imputação Automática" />
                <Button fx:id="btnDetectAnomalies" style="-fx-background-color: #8B5CF6; -fx-text-fill: white;" text="Detectar Anomalias" />
                <Button fx:id="btnQuickStats" style="-fx-background-color: #10B981; -fx-text-fill: white;" text="Estatísticas Rápidas" />
            </VBox>

            <Separator style="-fx-background-color: #334155;" />

            <Label style="-fx-text-fill: #9CA3AF;" text="Histórico" />
            <ListView fx:id="lvHistory" style="-fx-background-color: #1a2435; -fx-text-fill: white;" />

            <Separator style="-fx-background-color: #334155;" />

            <Label style="-fx-text-fill: #9CA3AF;" text="Exportar Dados" />
            <HBox spacing="8">
                <Button fx:id="btnExportCSV" style="-fx-background-color: #6B7280; -fx-text-fill: white;" text="CSV" />
                <Button fx:id="btnExportJSON" style="-fx-background-color: #6B7280; -fx-text-fill: white;" text="JSON" />
            </HBox>
        </VBox>
    </right>

    <!-- BOTTOM: status bar -->
    <bottom>
        <HBox alignment="CENTER_LEFT" spacing="12" style="-fx-padding:10; -fx-background-color: linear-gradient(#06121a, #071421);">
            <Region HBox.hgrow="ALWAYS" />
            <Label fx:id="lblMemory" style="-fx-text-fill:#9CA3AF; -fx-font-size:11;" text="Memória: --" />
        </HBox>
    </bottom>
   <padding>
      <Insets bottom="10.0" left="10.0" right="10.0" top="10.0" />
   </padding>
   <stylesheets>
      <URL value="@../../../../css/ds.css" />
      <URL value="@../../../../css/ContextMenuStyle.css" />
      <URL value="@../../../../css/ComboboxModern.css" />
   </stylesheets>

</BorderPane>
